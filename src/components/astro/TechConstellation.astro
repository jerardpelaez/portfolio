---
import { Image } from 'astro:assets'
import { skills, skillCategories } from '../../data/skills'
import aureliaIcon from '../../assets/images/aurelia-transparent.png'

// Group skills by category
const skillsByCategory = skillCategories.map(category => ({
  category,
  skills: skills
    .filter(s => s.categoryId === category.id)
    .sort((a, b) => b.level - a.level)
}))
---

<section id="skills" class="py-20 md:py-32 bg-dark-bg relative overflow-hidden">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
    <!-- Header -->
    <div class="text-center mb-16 reveal">
      <span class="inline-block text-primary font-semibold mb-4">My Skills</span>
      <h2 class="text-3xl sm:text-4xl md:text-5xl font-bold text-dark-text mb-6">
        Technologies I Work With
      </h2>
      <p class="text-lg text-dark-muted max-w-2xl mx-auto">
        I continuously expand my skill set to stay ahead in the ever-evolving tech landscape.
      </p>
    </div>

    <!-- Skills by Category -->
    <div class="space-y-12 reveal">
      {skillsByCategory.map(({ category, skills: categorySkills }) => (
        <div>
          <!-- Category Header -->
          <div class="flex items-center gap-3 mb-6">
            <span
              class="w-2.5 h-2.5 rounded-full"
              style={`background-color: ${category.color}; box-shadow: 0 0 12px ${category.glowColor};`}
            />
            <h3 class="text-lg font-semibold text-dark-text">
              {category.name}
            </h3>
          </div>

          <!-- Cards Grid -->
          <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 lg:gap-5" role="list">
            {categorySkills.map((skill) => (
              <div
                role="listitem"
                aria-label={`${skill.name} - ${category.name}`}
                class="tech-card group relative flex flex-col items-center justify-center rounded-2xl border p-5 transition-all duration-200 hover:-translate-y-1 hover:scale-[1.02]"
                style={`
                  background: rgba(22, 25, 22, 0.6);
                  backdrop-filter: blur(12px);
                  -webkit-backdrop-filter: blur(12px);
                  border-color: ${category.color}15;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15), inset 0 0 0 1px ${category.color}08;
                `}
              >
                <!-- Icon -->
                <div class="flex items-center justify-center w-full h-20 mb-3">
                  {skill.id === 'aurelia' ? (
                    <Image src={aureliaIcon} alt="Aurelia" width={48} height={48} class="w-12 h-12 transition-transform duration-200 group-hover:scale-110 object-contain" />
                  ) : (
                    <i class={`${skill.icon} text-5xl transition-transform duration-200 group-hover:scale-110`} />
                  )}
                </div>

                <!-- Name -->
                <span class="text-sm font-semibold text-dark-text text-center w-full">
                  {skill.name}
                </span>
              </div>
            ))}
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .tech-card:hover {
    box-shadow:
      0 8px 24px rgba(0, 0, 0, 0.2),
      0 0 20px rgba(167, 139, 250, 0.15),
      inset 0 0 0 1px rgba(167, 139, 250, 0.1);
  }
</style>
